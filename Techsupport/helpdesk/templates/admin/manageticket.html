{% extends "admin/adminbase.html" %}
{% load static %}
{% load tailwind_filters %}
{% block content %}

<div class="flex flex-1">
    <div class="w-9/12 px-[5%] py-6">
        <h2 class="font-bold text-2xl">Raised Tickets</h2>

        <table class="table border w-full mt-5">
            <thead>
                <tr class="bg-slate-500 border-b">
                    <th class="px-3 py-4 text-left">Ticket ID</th>
                    <th class="px-3 py-4 text-left">Subject</th>
                    <th class="px-3 py-4 text-left">Status</th>
                    <th class="px-3 py-4 text-left">created_by</th>
                    <th class="px-3 py-4 text-left">Attachment</th>
                    <th class="px-3 py-4 text-left">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for ticket in tickets %}
                <tr class="border-b hover:bg-slate-500">
                    <td class="py-2 px-4">{{forloop.counter}}</td>
                    <td class="py-2 px-4">{{ticket.title}}</td>
                    <td class="py-2 px-4">
                        <span class="px-2 py-1 text-lg rounded 
                            {% if ticket.status == 'open' %} bg-red-100 text-red-700 
                            {% else %} bg-red-100 text-red-700 {% endif %}">
                            {{ ticket.status|title }}
                        </span>
                    </td>
                    <td class="py-2 px-4">{{ticket.created_by.username}}</td>
                    <td class="px-3 py-2">
                        <a href="{{ticket.attachment.url}}">
                            <i class="fa-solid fa-arrow-down"></i>
                        </a>
                    </td>
                    <td class="py-2 px-4 text-center flex justify-center items-center w-[100px] gap-2">
                        <a href="" class="bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded">View</a>
                        <!-- <a href="" class=" flex gap-4 rounded bg-red-500 text-white px-3 py-2 hover:bg-red-600">open</a> -->
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="w-3/12">
        <h2 class="text-2xl font-bold mt-6 text-center">Insert ticket</h2>
        <form action="{% url 'managetickets' %}" method="post" enctype="multipart/form-data">
            {{ Aticketform|crispy }}
            {{ Aattachmentform|crispy }}
            {{ Acommentsform|crispy }}
            {% csrf_token %}
            <div class="w-2/4 text-center mt-6">
                <input type="submit" value="Raise your ticket here" class="bg-slate-500 text-white px-3 py-2 rounded ">
            </div>
        </form>
    </div>
</div>

{% endblock %}